
PRODUCT RECOMMENDATIONS: “YOU MAY ALSO LIKE” (IMPLEMENTATION NOTES)
==================================================================

Goal
----
- On ProductDetails, show recommended products.
- Recommendation logic: same category + closest price.
- Keep it lightweight: use existing endpoints (no new backend route required).


1) Backend support used (no new endpoint added)
----------------------------------------------

We reused the existing products list endpoint which already supports category filtering:
- GET /api/V1/products?category=<category>

Backend code path:
- Backend/routes/product.route.js
	- router.get("/", getAllProducts)
- Backend/controller/product.controller.js
	- getAllProducts checks req.query.category and runs:
		Product.find({ categories: { $in: [qCategory] } })

So we can request products in the same category as the current product.


2) Frontend component created
-----------------------------

File:
- frontend/src/components/RecommendedProductsSection.jsx

Props:
- currentProduct: the product currently being viewed
- excludeId: the productId to exclude from results (prevents recommending itself)
- limit: max number of items to show (default 8)

What it does:
- Reads current product categories (currentProduct.categories).
- Fetches products for the first category using:
	userRequest.get(`/products?category=${category}`)
- Filters out:
	- the current product (excludeId)
	- any product that does not share at least one category
- Computes a “price difference score”:
	diff = abs((candidatePrice) - (currentPrice))
	where price = discountPrice || originalPrice
- Sorts by smallest diff first (closest price first).
- Renders a product grid using the existing Product card component.


3) Where it was added in the UI
-------------------------------

File:
- frontend/src/pages/ProductDetails.jsx

Integration:
- Imported RecommendedProductsSection.
- Rendered it at the bottom of the ProductDetails page:
	<RecommendedProductsSection
		currentProduct={product}
		excludeId={productId}
		limit={8}
	/>

This makes recommendations visible right on the product page where users decide what to buy.


4) Behavior notes
-----------------

- If currentProduct has no categories, the section shows nothing (returns null).
- If the category call returns few products, it will show fewer recommendations.
- This is intentionally simple and safe: no new database fields or schema changes needed.


5) How to test
--------------

1) Start backend + frontend.
2) Open a product detail page for a product that has categories.
3) Scroll down and confirm “You may also like” appears.
4) Verify:
	 - it does not include the same product you’re currently viewing
	 - products are from same category
	 - prices are reasonably close (since we sort by price difference)

